(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},147:function(e,t,a){e.exports=a(205)},153:function(e,t,a){},205:function(e,t,a){"use strict";a.r(t);var n=a(20),i=a.n(n),r=a(34),s=a(0),o=a.n(s),c=a(10),l=a.n(c),u=(a(153),a(63)),d=a(64),m=a(78),h=a(65),p=a(39),f=a(79),g=(a(104),a(71)),E=a.n(g),v=a(50),S=a.n(v),y=a(44),x=a.n(y),b=a(125),I=a.n(b),k={SINGLE:"single",MULTIPLE:"multiple"},O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleDelete=function(e){return function(){var t=a.state.items.filter(function(t){return t.id!==e.id});a.setState({items:t}),a.ui.document.field.setValue(JSON.stringify(t))}},a.openDialog=a.openDialog.bind(Object(p.a)(a)),a.ui=e.ui,console.log(a.ui),a.state={items:[]},a.extensionConfig=JSON.parse(a.ui.extension.config),a.application=a.extensionConfig.application,a.extensionConfig.dataMode===k.SINGLE?a.dataMode=k.SINGLE:a.dataMode=k.MULTIPLE,a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setInitialState(this.ui)}},{key:"setInitialState",value:function(){var e=Object(r.a)(i.a.mark(function e(t){var a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.document.get();case 3:return a=e.sent,this.mode=a.mode,this.setState({mode:this.mode}),e.next=8,t.document.field.getValue();case 8:n=e.sent,r=JSON.parse(n),this.mode!==k.SINGLE||Array.isArray(r)||(r=[]).push(r),this.setState({items:r}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Failed to register extension:",e.t0.message),console.error("- error code:",e.t0.code);case 18:case"end":return e.stop()}},e,this,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"openDialog",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=JSON.parse(this.ui.extension.config),this.dialogOptions={title:t.title,url:"./dialog",size:t.size,value:JSON.stringify(this.state.items)},e.next=5,this.ui.dialog.open(this.dialogOptions);case 5:if(a=e.sent,this.mode!==k.SINGLE){e.next=12;break}return n=[],e.next=10,this.ui.document.field.setValue(JSON.stringify(n));case 10:e.next=16;break;case 12:return this.setState({items:a}),r=JSON.stringify(a),e.next=16,this.ui.document.field.setValue(r);case 16:e.next=23;break;case 18:if(e.prev=18,e.t0=e.catch(0),"DialogCanceled"!==e.t0.code){e.next=22;break}return e.abrupt("return");case 22:console.error("Error after open dialog: ",e.t0.code,e.t0.message);case 23:case"end":return e.stop()}},e,this,[[0,18]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(I.a,null,"edit"===this.state.mode?this.state.items.map(function(t,a){return o.a.createElement(S.a,{key:a,size:"medium",avatar:o.a.createElement(x.a,{src:t.image?t.image:"default"}),label:t.title,onDelete:e.handleDelete(t)})}):this.state.items.map(function(e,t){return o.a.createElement(S.a,{key:t,size:"medium",avatar:o.a.createElement(x.a,{src:e.image?e.image:"default"}),label:e.title})})),o.a.createElement(E.a,{disabled:"edit"!==this.state.mode,onClick:this.openDialog},"Open Browser"))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(144),w=a(36),M=a(129),j=a(132),N=a.n(j),C=a(98),D=a.n(C),H=a(138),V=a.n(H),G=a(137),z=a.n(G),J=a(135),T=a.n(J),q=a(136),A=a.n(q),U=a(134),P=a.n(U),F=a(139),B=a.n(F),R=a(142),W=a.n(R),Q=a(131),Y=a.n(Q),Z=a(95),$=a.n(Z),K=a(133),X=a.n(K),_=a(130),ee=a.n(_),te=a(224),ae=a(143),ne=a.n(ae),ie=a(96),re=a.n(ie),se=a(97),oe=a.n(se),ce={SINGLE:"single",MULTIPLE:"multiple"},le={GALLERY:"Gallery",LIST:"List"},ue=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).ui=e.ui,a.onScroll=a.onScroll.bind(Object(p.a)(a)),a.onOk=a.onOk.bind(Object(p.a)(a)),a.extensionConfig=JSON.parse(a.ui.extension.config),a.application=a.extensionConfig.application,a.extensionConfig.dataMode===ce.SINGLE?a.dataMode=ce.SINGLE:a.dataMode=ce.MULTIPLE,a.urlEndpoint=a.ui.baseUrl+"edp/"+a.application,a.state={items:[],query:a.extensionConfig.query,page:1,pageSize:a.extensionConfig.pageSize,isLoading:!1,hasMore:!0,selectedItems:[],open:!1,galleryType:le.GALLERY},a.clientId=a.extensionConfig.clientId,a.useStyles=Object(te.a)(function(e){return{grow:{flexGrow:1},search:{flexGrow:1}}}),a.extDialog=o.a.createRef(),a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setInitialSelected(this.ui).then(this.fetchItems(this.state.query,this.state.page,this.state.pageSize).then(function(t){return e.setState({items:t})}))}},{key:"onScroll",value:function(){var e=this,t=this.extDialog.current,a=t.scrollHeight-t.scrollTop,n=t.offsetHeight-a;0!==n&&1!==n||this.state.isLoading||this.fetchItems(this.state.query,this.state.page+1,this.state.pageSize).then(function(t){return e.state.items.concat(t)}).then(function(t){return e.setState({items:t,page:e.state.page+1})})}},{key:"setInitialSelected",value:function(){var e=Object(r.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.dialog.options();case 3:a=e.sent,n=JSON.parse(a.value),this.setState({selectedItems:n}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Failed to register extension:",e.t0.message),console.error("- error code:",e.t0.code);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"addItem",value:function(e){if(this.dataMode===ce.SINGLE){var t=[];t.push(e),this.setState({selectedItems:t}),this.ui.dialog.close(t)}else{var a=this.state.selectedItems;a.push(e),this.setState({selectedItems:a})}}},{key:"deleteItem",value:function(e){var t=this.state.selectedItems.filter(function(t){return t.id!==e.id});this.setState({selectedItems:t})}},{key:"fetchItems",value:function(){var e=Object(r.a)(i.a.mark(function e(t,a,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,fetch(this.urlEndpoint+"/search?query="+t+"&page="+a+"&pageSize="+n+"&clientId="+this.clientId).then(function(e){return e.json()});case 3:return r=e.sent,this.setState({isLoading:!1}),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"changeQuery",value:function(e){var t=this;this.setState({query:e,page:1}),this.fetchItems(e,this.state.page,this.state.pageSize).then(function(e){return t.setState({items:e})})}},{key:"onOk",value:function(){this.ui.dialog.close(this.state.selectedItems)}},{key:"render",value:function(){var e=this,t=(this.state||!1).isLoading,a=(this.state||[]).items,n=(this.state||[]).selectedItems,i=this.useStyles,r=this.dataMode===ce.MULTIPLE;return o.a.createElement(ee.a,{fullScreen:!0,open:!0},o.a.createElement(Y.a,{position:"static",color:"default"},o.a.createElement($.a,null,o.a.createElement(N.a,{className:i.search,autoFocus:!0,margin:"dense",id:"search",label:"Search",type:"text",fullWidth:!0,onChange:function(t){return e.changeQuery(t.target.value)}}),o.a.createElement(re.a,{disabled:!0},o.a.createElement(oe.a,null,o.a.createElement("path",{fill:"#000000",d:"M3,11H11V3H3M3,21H11V13H3M13,21H21V13H13M13,3V11H21V3"}))),o.a.createElement(re.a,{disabled:!0},o.a.createElement(oe.a,null,o.a.createElement("path",{fill:"#000000",d:"M3,4H21V8H3V4M3,10H21V14H3V10M3,16H21V20H3V16Z"}))))),o.a.createElement(X.a,{ref:this.extDialog,onScroll:this.onScroll},o.a.createElement(P.a,null,a.map(function(t,a){return o.a.createElement(T.a,{key:a},o.a.createElement("img",{src:t.image,alt:t.title}),o.a.createElement(A.a,{title:t.title,subtitle:o.a.createElement("span",null,t.description),actionIcon:n.some(function(e){return e.id===t.id})?o.a.createElement(D.a,{color:"secondary","aria-label":"Delete"},o.a.createElement(z.a,{onClick:function(a){return e.deleteItem(t)}})):o.a.createElement(D.a,{color:"primary","aria-label":"Add"},o.a.createElement(V.a,{onClick:function(a){return e.addItem(t)}}))}))}))),o.a.createElement(B.a,{in:t,style:{zIndex:9999999,position:"fixed",bottom:0,right:0,transitionDelay:t?"800ms":"0ms"},unmountOnExit:!0},o.a.createElement(W.a,null)),r&&o.a.createElement($.a,null,o.a.createElement(ne.a,{variant:"h6"},"Selected:"),o.a.createElement("div",{style:{flex:5}},n.map(function(e,t){return o.a.createElement(S.a,{key:t,size:"small",avatar:o.a.createElement(x.a,{src:e.image?e.image:"default"}),label:e.title})})),o.a.createElement(E.a,{style:{flex:1},color:"inherit",onClick:this.onOk},"Ok")))}}]),t}(o.a.Component);document.addEventListener("DOMContentLoaded",Object(r.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.register();case 3:t=e.sent,a=o.a.createElement(L.a,null,o.a.createElement(w.c,null,o.a.createElement(w.a,{path:"/dialog",render:function(e){return o.a.createElement(ue,{ui:t})}}),o.a.createElement(w.a,{exact:!0,path:"/",render:function(e){return o.a.createElement(O,{ui:t})}}))),l.a.render(a,document.getElementById("root")),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),console.error("Failed to register extension:",e.t0.message),console.error("- error code:",e.t0.code);case 13:case"end":return e.stop()}},e,null,[[0,8]])}))),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,1,2]]]);
//# sourceMappingURL=main.d644f67a.chunk.js.map